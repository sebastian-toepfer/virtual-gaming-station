[Unit]
Description=Apply configuration from Git via ansible-pull

[Service]
Type=oneshot
Environment=LANG=C.UTF-8
Environment=LC_ALL=C.UTF-8
ExecStartPre=/usr/bin/bash -lc 'pacman -Sy --noconfirm --needed ansible git python'
ExecStart=/usr/bin/ansible-pull -U {{ git_repo_url }} -C {{ git_branch }} -i localhost, -c local -e ansible_python_interpreter=/usr/bin/python site.yml

[Install]
WantedBy=multi-user.target
